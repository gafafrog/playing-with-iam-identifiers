<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LT：IAMで感じるコンピューターサイエンスの基礎</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Noto+Sans+JP:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        html {
            scroll-snap-type: y mandatory;
        }
        body {
            font-family: 'Inter', 'Noto Sans JP', sans-serif;
            background-color: #111827; /* Dark Gray */
            color: #F3F4F6; /* Light Gray */
        }
        .slide {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: flex-start; /* Align content block to the top */
            align-items: center;
            padding: 5rem 4rem;
            border-bottom: 1px solid #374151;
            scroll-snap-align: start;
            scroll-snap-stop: always;
        }
        .slide-content {
            max-width: 1200px;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            /* Make content area fill the slide's vertical space */
            flex: 1;
        }
        h2.slide-title {
            font-size: 3.75rem;
            font-weight: 900;
            text-align: center;
            letter-spacing: -0.025em;
            width: 100%;
            margin-bottom: 4rem;
            /* Prevent title from shrinking */
            flex-shrink: 0;
        }
        .slide-body {
            width: 100%;
            /* Make the body fill the remaining space */
            flex-grow: 1;
            /* Center its content vertically and horizontally */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        pre {
            background-color: #1F2937;
            border: 1px solid #374151;
            border-radius: 0.5rem;
            padding: 1.5rem;
            overflow-x: auto;
            font-size: 1rem;
            line-height: 1.7;
        }
        code {
            font-family: 'Menlo', 'Monaco', 'Consolas', "Liberation Mono", "Courier New", monospace;
        }
        a {
            color: #60A5FA;
            text-decoration: underline;
        }
        /* Special style for title-only slides to center content vertically */
        .slide.is-centered {
            justify-content: center; /* This vertically centers the content */
            padding-top: 0;
            padding-bottom: 0;
        }
        .slide.is-centered .slide-content {
            flex-grow: 0; /* Stop the content block from filling the space, allowing it to be centered */
        }
        .slide.is-centered .slide-title {
            margin-bottom: 0; /* Remove bottom margin for perfect centering */
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-100">

    <main>
        <!-- スライド1：タイトル -->
        <section class="slide is-centered">
            <div class="slide-content text-center">
                <h2 class="slide-title">IAMで感じる<br>コンピューターサイエンスの基礎</h2>
            </div>
        </section>

        <!-- スライド2：自己紹介 -->
        <section class="slide">
            <div class="slide-content">
                <h2 class="slide-title">わたし</h2>
                <div class="slide-body">
                    <div class="grid md:grid-cols-3 gap-8 items-center">
                        <div class="flex justify-center">
                            <img src="https://unavatar.io/twitter/gafafrog" alt="gafafrogさんのXプロフィール画像" class="rounded-full w-48 h-48 object-cover shadow-lg">
                        </div>
                        <div class="md:col-span-2 text-2xl space-y-4">
                            <p><span class="font-bold">gafafrog</span> / SNS: <a href="https://x.com/gafafrog" target="_blank">@gafafrog</a></p>
                            <p class="text-xl mt-4">普段はIAMでソフトウェア開発者をしています。</p>
                            <p class="font-bold mt-8">採用しています！ <a href="https://www.amazon.jobs" target="_blank">https://www.amazon.jobs</a></p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- スライド3：IAM Identifiers (Live Demo) -->
        <section class="slide">
            <div class="slide-content">
                <h2 class="slide-title">IAM Identifiers (Live Demo)</h2>
                <div class="slide-body">
                    <div class="w-full">
                        <p class="mb-4 text-lg text-center">参考: <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_identifiers.html" target="_blank">IAM Identifiers (AWS Docs)</a></p>
                        <pre><code class="language-bash">aws iam list-users --max-items 5 --query 'Users[].UserId' --output text | tr '\t' '\n'
aws iam list-roles --max-items 5 --query 'Roles[].RoleId' --output text | tr '\t' '\n'</code></pre>
                    </div>
                </div>
            </div>
        </section>

        <!-- スライド4：実行結果 -->
        <section class="slide">
            <div class="slide-content">
                <h2 class="slide-title">実行結果</h2>
                <div class="slide-body">
                    <pre class="w-full"><code class="language-bash"># User IDs
$ aws iam list-users --max-items 5 --query 'Users[].UserId' --output text | tr '\t' '\n'
AIDAVI363QCFCID3DLLFU
AIDAVI363QCFBHNTIMT5Z

# Role IDs
$ aws iam list-roles --max-items 5 --query 'Roles[].RoleId' --output text | tr '\t' '\n'
AROAVI363QCFFRQNZPFCM
AROAVI363QCFCHVWR6WLJ
AROAVI363QCFF7FBH4ESB
AROAVI363QCFJX2T55E5U
AROAVI363QCFDBDJZ2YYT</code></pre>
                </div>
            </div>
        </section>

        <!-- スライド5: AWSアカウントID -->
        <section class="slide">
            <div class="slide-content">
                <h2 class="slide-title">AWSアカウントID</h2>
                <div class="slide-body">
                    <ul class="text-4xl space-y-8 list-disc list-inside text-center">
                        <li>12桁の数列</li>
                        <li>秘密？</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- スライド6：エンコーディング -->
        <section class="slide">
            <div class="slide-content">
                <h2 class="slide-title">エンコーディング</h2>
                <div class="slide-body">
                    <p class="text-8xl text-center">なんでしょうね</p>
                </div>
            </div>
        </section>

        <!-- スライド7：Base32！ -->
        <section class="slide">
            <div class="slide-content">
                <h2 class="slide-title text-6xl">Base32!</h2>
                <div class="slide-body">
                    <div class="w-full">
                        <p class="mb-4 text-lg text-center"><a href="https://en.wikipedia.org/wiki/Base32" target="_blank">https://en.wikipedia.org/wiki/Base32</a></p>
                        <pre><code class="language-bash"># b32_to_bits.py を作成
cat &lt;&lt; 'EOF' &gt; b32_to_bits.py
import sys

BASE32_ALPHABET = "ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"
DECODE_MAP = {char: index for index, char in enumerate(BASE32_ALPHABET)}

def base32_to_bit_array(b32_string):
    bit_string = ""
    for char in b32_string.upper():
        if char in DECODE_MAP:
            value = DECODE_MAP[char]
            bit_string += format(value, '05b')
    return bit_string

iam_id_part = sys.argv[1]
bit_array = base32_to_bit_array(iam_id_part)

print(f"Base32文字列: {iam_id_part}")
print(f"ビット配列: {bit_array}")
EOF

# スクリプトを実行
python3 b32_to_bits.py "VI363QCF"</code></pre>
                    </div>
                </div>
            </div>
        </section>

        <!-- スライド8：ビット遊び -->
        <section class="slide">
            <div class="slide-content">
                <h2 class="slide-title">ビット遊び</h2>
                <div class="slide-body">
                    <pre class="w-full"><code class="language-text">Base32文字列: VI363QCF
ビット配列: 101010110111001101100011110100011000110</code></pre>
                </div>
            </div>
        </section>

        <!-- スライド9：ビット遊び -->
        <section class="slide">
            <div class="slide-content">
                <h2 class="slide-title">ビット遊び</h2>
                <div class="slide-body">
                    <pre class="w-full"><code class="language-bash"># find_account_id.py を作成
cat &lt;&lt; 'EOF' &gt; find_account_id.py
import sys

BASE32_ALPHABET = "ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"
DECODE_MAP = {char: index for index, char in enumerate(BASE32_ALPHABET)}

def base32_to_bit_array(b32_string):
    """Base32文字列をビット配列（文字列）に変換する"""
    bit_string = ""
    for char in b32_string.upper():
        if char in DECODE_MAP:
            value = DECODE_MAP[char]
            bit_string += format(value, '05b')
    return bit_string

if len(sys.argv) < 2:
    print("エラー: 解析するIDを引数として渡してください。")
    sys.exit(1)

iam_id_part = sys.argv[1]
bit_array = base32_to_bit_array(iam_id_part)

print(f"--- ビットの海から40ビットずつ切り出して探す ---")

# 12桁のアカウントIDは約39.8ビットなので、40ビット分を候補とする
for shift in range(16): # デモ用に探索範囲を限定
    if shift + 40 > len(bit_array):
        break

    # 開始位置をずらし、40ビット分を切り出す
    bit_chunk = bit_array[shift : shift + 40]

    # 切り出したビットの塊を整数に変換
    candidate = int(bit_chunk, 2)

    # 候補を12桁に整形して表示（足りなければ0で埋める）
    print(f"開始 {shift:2d} bit目: {'{:0>12}'.format(str(candidate)[:12])}")
EOF

# ID全体を渡して実行
python3 find_account_id.py "VI363QCFCID3DLLFU"</code></pre>
                </div>
            </div>
        </section>

        <!-- スライド10：アカウントID、発見！ -->
        <section class="slide">
            <div class="slide-content">
                <h2 class="slide-title">アカウントID、発見！</h2>
                <div class="slide-body">
                    <pre class="w-full"><code class="language-text">--- ビットの海から40ビットずつ切り出して探す ---
開始  0 bit目: 783446549264
開始  1 bit: 829413098529
開始  2 bit: 921346197058
開始  3 bit: 097930818658
開始  4 bit: 048965409329
開始  5 bit: 024482704664
開始  6 bit: 012241352332
<span class="bg-yellow-500 text-black font-bold p-1 rounded">開始  7 bit目: 123456789012  &lt;-- これだ！</span>
...</code></pre>
                </div>
            </div>
        </section>

        <!-- スライド11：他の取得方法 -->
        <section class="slide">
            <div class="slide-content">
                <h2 class="slide-title">他の取得方法</h2>
                <div class="slide-body">
                    <div class="grid md:grid-cols-2 gap-8 w-full">
                        <div>
                            <h3 class="text-2xl font-bold mb-2">方法1：マネジメントコンソール</h3>
                            <p class="text-lg">AWSマネジメントコンソールの右上に表示されるアカウント情報から確認できます。</p>
                            <img src="https://placehold.co/400x150/1F2937/FFFFFF?text=コンソールのスクリーンショット画像" alt="コンソールのスクリーンショット画像" class="mt-4 rounded-lg border border-gray-600">
                        </div>
                        <div>
                            <h3 class="text-2xl font-bold mb-2">方法2：AWS CLI</h3>
                            <p class="text-lg"><code>sts get-access-key-info</code> コマンドで、アクセスキーIDからアカウントIDを取得できます。</p>
                            <pre class="mt-4"><code class="language-bash">$ aws sts get-access-key-info --access-key-id AKIAIOSFODNN7EXAMPLE

{
    "Account": "123456789012"
}</code></pre>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- スライド12：まとめ -->
        <section class="slide">
            <div class="slide-content">
                <h2 class="slide-title">まとめ</h2>
                <div class="slide-body">
                    <ul class="text-4xl space-y-8 list-disc list-inside text-center">
                        <li>エンコーディング (Base32)</li>
                        <li>ビット演算</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- スライド13：おしまい -->
        <section class="slide is-centered">
            <div class="slide-content text-center">
                <h2 class="slide-title text-8xl">おしまい</h2>
            </div>
        </section>

    </main>

</body>
</html>
